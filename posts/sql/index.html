<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="author" content="Fei Li"><meta name="description" content="Fei Li's data science and programming blogs."><meta name="keywords" content="mathematics,data science,machine learning,deep learning,artificial intelligence,scientific computing,programming,python,julia"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@lifeitech"><meta name="twitter:creator" content="@lifeitech"><meta property="og:image" content="https://lifeitech.github.io/assets/imgs/website-post.jpg"><meta property="og:title" content="lifeitech.github.io"><meta property="og:description" content="Fei Li's data science and programming blogs."><meta property="og:url" content="https://lifeitech.github.io"><meta property="og:type" content="article"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="All about SQL Queries" /><meta property="og:locale" content="en" /><meta name="description" content="This post serves as a reference for SQL syntax. We cover the most frequently used commands, including ‚Äúcase when‚Äù, ‚Äújoin‚Äù and functions." /><meta property="og:description" content="This post serves as a reference for SQL syntax. We cover the most frequently used commands, including ‚Äúcase when‚Äù, ‚Äújoin‚Äù and functions." /><link rel="canonical" href="https://lifeitech.github.io/posts/sql/" /><meta property="og:url" content="https://lifeitech.github.io/posts/sql/" /><meta property="og:site_name" content="lifeitech.github.io" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-06-01T11:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="All about SQL Queries" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-10-29T19:50:49+08:00","datePublished":"2022-06-01T11:00:00+08:00","description":"This post serves as a reference for SQL syntax. We cover the most frequently used commands, including ‚Äúcase when‚Äù, ‚Äújoin‚Äù and functions.","headline":"All about SQL Queries","mainEntityOfPage":{"@type":"WebPage","@id":"https://lifeitech.github.io/posts/sql/"},"url":"https://lifeitech.github.io/posts/sql/"}</script><title>All about SQL Queries | lifeitech.github.io</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/imgs/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/imgs/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/imgs/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/imgs/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/imgs/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="lifeitech.github.io"><meta name="application-name" content="lifeitech.github.io"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/imgs/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css"> <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/38937278" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">lifeitech.github.io</a></div><div class="site-subtitle">data science and programming blogs</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <span style="font-size: 1.2em;">üè†</span> <span>Home</span> </a><li class="nav-item"> <a href="/notes/" class="nav-link"> <span style="font-size: 1.2em;">üìï</span> <span>Notes</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <span style="font-size: 1.2em;">üìÅ</span> <span>Categories</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <span style="font-size: 1.2em;">üîñ</span> <span>Tags</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <span style="font-size: 1.2em;">üì¶</span> <span>Archives</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <span style="font-size: 1.2em;">‚ö°</span> <span>About</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://www.linkedin.com/in/lifeipro" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://github.com/lifeitech" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['fei.li.best','outlook.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>All about SQL Queries</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@lifeitech"><meta name="twitter:creator" content="@lifeitech"><meta property="og:image" content="https://lifeitech.github.io/assets/imgs/sql.png"><meta property="og:title" content="All about SQL Queries"><meta property="og:description" content="<blockquote><p>This post serves as a reference for SQL syntax. We cover the most frequently used commands, including ‚Äúcase when‚Äù, ‚Äújoin‚Äù and functions.</p></blockquote>"><meta property="og:url" content="https://lifeitech.github.io/posts/sql/"><meta property="og:type" content="article"> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 500'%3E%3C/svg%3E" data-proofer-ignore data-src="/assets/imgs/sql.png" class="preview-img bg" alt="All about SQL Queries" width="800" height="500" ><h1 data-toc-skip>All about SQL Queries</h1><div class="post-meta text-muted"><div> By <em> <a href="https://lifeitech.github.io">Fei Li</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2022-06-01 11:00:00 +0800" data-toggle="tooltip" data-placement="bottom" title="Wed, Jun 1, 2022, 11:00 AM +0800" >Jun 1, 2022</em> </span> <span> Updated <em class="timeago" date="2023-10-29 15:20:49 +0330 " data-toggle="tooltip" data-placement="bottom" title="Sun, Oct 29, 2023, 3:20 PM +0330" >Oct 29, 2023</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2257 words"> <em>14 min</em> read</span></div></div></div><div class="post-content js-toc-content"><blockquote><p>This post serves as a reference for SQL syntax. We cover the most frequently used commands, including ‚Äúcase when‚Äù, ‚Äújoin‚Äù and functions.</p></blockquote><ul id="markdown-toc"><li><a href="#download-a-database" id="markdown-toc-download-a-database">Download a database</a><li><a href="#download-a-client" id="markdown-toc-download-a-client">Download a client</a><li><a href="#select-data" id="markdown-toc-select-data">Select Data</a><ul><li><a href="#select-columns-with-select--from-" id="markdown-toc-select-columns-with-select--from-">Select columns with ‚Äúselect ‚Ä¶ from ‚Ä¶‚Äù</a><li><a href="#filter-rows-with-where" id="markdown-toc-filter-rows-with-where">Filter rows with ‚Äúwhere‚Äù</a><li><a href="#filter-rows-with-distinct-order-by-and-limit" id="markdown-toc-filter-rows-with-distinct-order-by-and-limit">Filter rows with ‚Äúdistinct‚Äù, ‚Äúorder by‚Äù and ‚Äúlimit‚Äù</a><li><a href="#categorize-column-values-with-case-when" id="markdown-toc-categorize-column-values-with-case-when">Categorize column values with ‚Äúcase when‚Äù</a><li><a href="#select-columns-from-different-tables-with-join" id="markdown-toc-select-columns-from-different-tables-with-join">Select columns from different tables with ‚Äújoin‚Äù</a><ul><li><a href="#select-common-column-values-with-inner-join" id="markdown-toc-select-common-column-values-with-inner-join">select common column values with ‚Äúinner join‚Äù</a><li><a href="#select-rows-from-one-table-with-left-join-or-right-join" id="markdown-toc-select-rows-from-one-table-with-left-join-or-right-join">select rows from one table with ‚Äúleft join‚Äù or ‚Äúright join‚Äù</a><li><a href="#select-row-union-with-full" id="markdown-toc-select-row-union-with-full">select row union with full</a></ul><li><a href="#unions" id="markdown-toc-unions">Unions</a></ul><li><a href="#calculating-statistics-with-aggregate-functions" id="markdown-toc-calculating-statistics-with-aggregate-functions">Calculating statistics with aggregate functions</a><ul><li><a href="#apply-aggregate-functions-to-different-groups-of-rows-with-group-by" id="markdown-toc-apply-aggregate-functions-to-different-groups-of-rows-with-group-by">Apply aggregate functions to different groups of rows with ‚Äúgroup by‚Äù</a><li><a href="#filter-calculated-columns-with-having" id="markdown-toc-filter-calculated-columns-with-having">Filter calculated columns with ‚Äúhaving‚Äù</a></ul><li><a href="#functions" id="markdown-toc-functions">Functions</a><ul><li><a href="#date-operators--functions" id="markdown-toc-date-operators--functions">Date operators &amp; functions</a><li><a href="#string-operators--functions" id="markdown-toc-string-operators--functions">String operators &amp; functions</a><li><a href="#window-functions" id="markdown-toc-window-functions">Window functions</a></ul><li><a href="#examples" id="markdown-toc-examples">Examples</a><li><a href="#io-with-python" id="markdown-toc-io-with-python">I/O with Python</a></ul><p>A database is a software for storing data. There are many many databases available. They can be broadly classified into two categories: one is relational database, including MySQL and PostgreSQL. They other category is non-relational database, including MongoDB, Cassandra, neo4j, Dgraph and many others. Here we are concerned with SQL, the common syntax for querying relational databases.</p><h2 id="download-a-database">Download a database<a href="#download-a-database"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-proofer-ignore data-src="/assets/imgs/postgres-vs-mysql.png" alt="PostgreSQL vs MySQL" class="shadow" /></p><p>To practice writing SQL queries, you need to install a database on your computer first. You can download either MySQL or PostgreSQL. Both are open sourced, but MySQL is more widely used than PostgreSQL. Notably, PostgreSQL has more data types and functions, so it is more powerful, but it is also more complex and more difficult to learn. Query syntax for the two databases are largely similar, but not entirely the same, especially for functions.</p><ul><li>To install MySQL, download an installer on the <a href="https://dev.mysql.com/downloads/installer/">official website</a>. Then follow the installation guide and install all the components step by step.<li>To install PostgreSQL, go to the <a href="https://www.postgresql.org/download/">official website</a> and download an installer.</ul><h2 id="download-a-client">Download a client<a href="#download-a-client"><i class="fas fa-hashtag"></i></a></h2></h2><p>You might want a GUI client software to interact with your database. With MySQL installation it comes with a default one called MySQL Workbench. For PostgreSQL the default client that comes with the installation is pgAdmin. I find pgAdmin is ok, but Workbench is hard to use. I personally find</p><p><a href="https://www.beekeeperstudio.io/"><img data-proofer-ignore data-src="/assets/imgs/beekeeper-studio.png" alt="beekeeper studio" width="150" class="normal" /></a></p><p><a href="https://www.beekeeperstudio.io/">Beekeeper Studio</a></p><p>to be the best one.</p><p>To play with MySQL on Mac, there is also <a href="https://github.com/sequelpro/sequelpro">Sequel Pro</a> available.</p><p>Finally, there are also built-in command line clients. To start MySQL client, type</p><p><code class="language-plaintext highlighter-rouge">mysql --user=user_name --password db_name</code></p><p>in your shell. To add <code class="language-plaintext highlighter-rouge">mysql</code> to path in windows, add <code class="language-plaintext highlighter-rouge">C:\Program Files\MySQL\MySQL Server x.x\bin</code> to PATH in system environment variable, where <code class="language-plaintext highlighter-rouge">x.x.</code> is the version number. For PostgreSQL, the command line client is <code class="language-plaintext highlighter-rouge">psql</code>. To add it to path in windows, add <code class="language-plaintext highlighter-rouge">C:\Program Files\PostgreSQL\xx\bin</code> to the system PATH variable, where <code class="language-plaintext highlighter-rouge">xx</code> is the version number.</p><h2 id="select-data">Select Data<a href="#select-data"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="select-columns-with-select--from-">Select columns with ‚Äúselect ‚Ä¶ from ‚Ä¶‚Äù<a href="#select-columns-with-select--from-"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-sql highlighter-rouge"><div class="code-header"> <span label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">select</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="p">...</span>
<span class="k">from</span> <span class="n">tb</span>
</pre></table></code></div></div><h3 id="filter-rows-with-where">Filter rows with ‚Äúwhere‚Äù<a href="#filter-rows-with-where"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-sql highlighter-rouge"><div class="code-header"> <span label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">select</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="p">...</span>
<span class="k">from</span> <span class="n">tb</span>
<span class="k">where</span> <span class="n">condition1</span> <span class="k">and</span><span class="o">/</span><span class="k">or</span> <span class="n">condition2</span>
</pre></table></code></div></div><p>We can use <em>operators</em> on columns in <code class="language-plaintext highlighter-rouge">where</code> conditions.</p><div class="table-wrapper"><table><thead><tr><th>Operator<th>Description<th>Example<tbody><tr><td><code class="language-plaintext highlighter-rouge">=</code><td>equal to<td><code class="language-plaintext highlighter-rouge">col = 'salary'</code><tr><td><code class="language-plaintext highlighter-rouge">&lt;&gt;</code> / <code class="language-plaintext highlighter-rouge">!=</code><td>not equal to<td><code class="language-plaintext highlighter-rouge">dept != 'decision'</code><tr><td><code class="language-plaintext highlighter-rouge">&gt;</code><td>greater than<td><code class="language-plaintext highlighter-rouge">date &gt; 2022-02-15</code><tr><td><code class="language-plaintext highlighter-rouge">&lt;</code><td>less than<td><code class="language-plaintext highlighter-rouge">price &lt; 500.00</code><tr><td><code class="language-plaintext highlighter-rouge">&gt;=</code><td>greater than or equal<td><code class="language-plaintext highlighter-rouge">number &gt;= 2</code><tr><td><code class="language-plaintext highlighter-rouge">&lt;=</code><td>less than or equal<td><code class="language-plaintext highlighter-rouge">number &lt;= 2</code><tr><td><code class="language-plaintext highlighter-rouge">and</code><td>and<td><code class="language-plaintext highlighter-rouge">state = 'GA' and amount &gt; 1000</code><tr><td><code class="language-plaintext highlighter-rouge">or</code><td>or<td><code class="language-plaintext highlighter-rouge">state = 'GA' or amount &gt; 1000</code><tr><td><code class="language-plaintext highlighter-rouge">[not] between</code><td>between an inclusive range<td><code class="language-plaintext highlighter-rouge">price between 100.00 and 500.00</code><tr><td><code class="language-plaintext highlighter-rouge">[not] like</code><td>string pattern<td><code class="language-plaintext highlighter-rouge">name like 'Luca%'</code><tr><td><code class="language-plaintext highlighter-rouge">ilike</code><td>string pattern, ignoring capitalization<td><code class="language-plaintext highlighter-rouge">name ilike '%cafe%'</code><tr><td><code class="language-plaintext highlighter-rouge">[not] in</code><td>set membership test<td><code class="language-plaintext highlighter-rouge">col in ('col1', 'col2', 'col3')</code><tr><td><code class="language-plaintext highlighter-rouge">is [not] null</code><td>compare to null<td><code class="language-plaintext highlighter-rouge">address is not null</code><tr><td><code class="language-plaintext highlighter-rouge">is [not] true</code><td>boolean true value test<td><code class="language-plaintext highlighter-rouge">full_time is true</code><tr><td><code class="language-plaintext highlighter-rouge">is not distinct from</code><td>is equal to value or both are nulls<td><code class="language-plaintext highlighter-rouge">name is not distinct from full_name</code><tr><td><code class="language-plaintext highlighter-rouge">as</code><td>Rename table or column name. Can be omitted<td><code class="language-plaintext highlighter-rouge">select result as r</code></table></div><h3 id="filter-rows-with-distinct-order-by-and-limit">Filter rows with ‚Äúdistinct‚Äù, ‚Äúorder by‚Äù and ‚Äúlimit‚Äù<a href="#filter-rows-with-distinct-order-by-and-limit"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-sql highlighter-rouge"><div class="code-header"> <span label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="k">select</span> <span class="k">distinct</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="p">...</span> 
<span class="k">from</span> <span class="n">tb</span> 
<span class="k">where</span> <span class="n">condition</span>
<span class="k">order</span> <span class="k">by</span> <span class="n">col</span> <span class="k">asc</span><span class="o">/</span><span class="k">desc</span>
<span class="k">limit</span> <span class="p">[</span><span class="n">num</span><span class="p">]</span> <span class="k">offset</span> <span class="p">[</span><span class="n">num</span><span class="p">]</span>
</pre></table></code></div></div><blockquote class="prompt-info"><p>note: <code class="language-plaintext highlighter-rouge">distinct</code> can have slow performance.</p></blockquote><h3 id="categorize-column-values-with-case-when">Categorize column values with ‚Äúcase when‚Äù<a href="#categorize-column-values-with-case-when"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-sql highlighter-rouge"><div class="code-header"> <span label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="k">select</span> 
<span class="p">...</span>
<span class="k">case</span> 
<span class="k">when</span> <span class="n">condition1</span> <span class="k">then</span> <span class="n">label1</span>
<span class="k">when</span> <span class="n">condition2</span> <span class="k">then</span> <span class="n">label2</span>
<span class="k">when</span> <span class="n">condition3</span> <span class="k">then</span> <span class="n">label3</span>
<span class="k">else</span> <span class="n">label4</span>
<span class="k">end</span> <span class="p">(</span><span class="k">as</span> <span class="n">col_name</span><span class="p">)</span>
</pre></table></code></div></div><h3 id="select-columns-from-different-tables-with-join">Select columns from different tables with ‚Äújoin‚Äù<a href="#select-columns-from-different-tables-with-join"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-sql highlighter-rouge"><div class="code-header"> <span label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="k">select</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="p">...</span>
<span class="k">from</span> <span class="n">tb1</span> <span class="p">(</span><span class="k">inner</span><span class="o">/</span><span class="k">left</span><span class="o">/</span><span class="k">right</span><span class="o">/</span><span class="k">full</span><span class="p">)</span> <span class="k">join</span> <span class="n">tb2</span> 
<span class="k">on</span> <span class="n">tb1</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">tb2</span><span class="p">.</span><span class="n">id</span>
<span class="k">where</span> <span class="n">condition</span>
<span class="p">...</span>
</pre></table></code></div></div><p>We illustrate inner, left, right and full join with the following two tables.</p><p>This is tb1.</p><div class="table-wrapper"><table><thead><tr><th>id<th>c1<tbody><tr><td>a<td>value<tr><td>b<td>value<tr><td>c<td>value<tr><td>d<td>value<tr><td>e<td>value</table></div><p>This is tb2.</p><div class="table-wrapper"><table><thead><tr><th>id<th>c2<tbody><tr><td>a<td>value<tr><td>b<td>value<tr><td>x<td>value<tr><td>y<td>value</table></div><h4 id="select-common-column-values-with-inner-join">select common column values with ‚Äúinner join‚Äù<a href="#select-common-column-values-with-inner-join"><i class="fas fa-hashtag"></i></a></h4></h4><p><code class="language-plaintext highlighter-rouge">inner join</code> is tb1 $\cap$ tb2.</p><div class="table-wrapper"><table><thead><tr><th>id<th>c1<th>c2<tbody><tr><td>a<td>value<td>value<tr><td>b<td>value<td>value</table></div><h4 id="select-rows-from-one-table-with-left-join-or-right-join">select rows from one table with ‚Äúleft join‚Äù or ‚Äúright join‚Äù<a href="#select-rows-from-one-table-with-left-join-or-right-join"><i class="fas fa-hashtag"></i></a></h4></h4><p><code class="language-plaintext highlighter-rouge">left join</code> selects all values from tb1‚Äôs id column.</p><div class="table-wrapper"><table><thead><tr><th>id<th>c1<th>c2<tbody><tr><td>a<td>value<td>value<tr><td>b<td>value<td>value<tr><td>c<td>value<td><code class="language-plaintext highlighter-rouge">null</code><tr><td>d<td>value<td><code class="language-plaintext highlighter-rouge">null</code><tr><td>e<td>value<td><code class="language-plaintext highlighter-rouge">null</code></table></div><p><code class="language-plaintext highlighter-rouge">right join</code> selects all values from tb2‚Äôs id column.</p><div class="table-wrapper"><table><thead><tr><th>id<th>c1<th>c2<tbody><tr><td>a<td>value<td>value<tr><td>b<td>value<td>value<tr><td>x<td><code class="language-plaintext highlighter-rouge">null</code><td>value<tr><td>y<td><code class="language-plaintext highlighter-rouge">null</code><td>value</table></div><h4 id="select-row-union-with-full">select row union with full<a href="#select-row-union-with-full"><i class="fas fa-hashtag"></i></a></h4></h4><p><code class="language-plaintext highlighter-rouge">full</code> means tb $\cup$ tb2.</p><div class="table-wrapper"><table><thead><tr><th>id<th>c1<th>c2<tbody><tr><td>a<td>value<td>value<tr><td>b<td>value<td>value<tr><td>c<td>value<td><code class="language-plaintext highlighter-rouge">null</code><tr><td>d<td>value<td><code class="language-plaintext highlighter-rouge">null</code><tr><td>e<td>value<td><code class="language-plaintext highlighter-rouge">null</code><tr><td>x<td><code class="language-plaintext highlighter-rouge">null</code><td>value<tr><td>y<td><code class="language-plaintext highlighter-rouge">null</code><td>value</table></div><blockquote class="prompt-info"><p>The <code class="language-plaintext highlighter-rouge">outer</code> keyword is deprecated. It is kept for backward compatibility with SQL-92 only.</p></blockquote><blockquote class="prompt-info"><p><code class="language-plaintext highlighter-rouge">left join</code> may be less efficient than (inner) <code class="language-plaintext highlighter-rouge">join</code>.</p></blockquote><h3 id="unions">Unions<a href="#unions"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-sql highlighter-rouge"><div class="code-header"> <span label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">select</span> <span class="n">col</span> <span class="k">from</span> <span class="n">tb1</span>
<span class="k">union</span> <span class="k">all</span>
<span class="k">select</span> <span class="n">col</span> <span class="k">from</span> <span class="n">tb2</span>
</pre></table></code></div></div><p>Sometimes we need to combine <em>rows</em> from two different tables. We can use <code class="language-plaintext highlighter-rouge">union</code> or <code class="language-plaintext highlighter-rouge">union all</code> for that purpose. <code class="language-plaintext highlighter-rouge">union</code> will only retain unique rows, while <code class="language-plaintext highlighter-rouge">union all</code> will retain all rows.</p><p>Union is also different from <code class="language-plaintext highlighter-rouge">where ... or ...</code> clause. This query</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">select</span> <span class="n">device_id</span><span class="p">,</span> <span class="n">gender</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">gpa</span> <span class="k">from</span> <span class="n">user_profile</span> <span class="k">where</span> <span class="n">university</span> <span class="o">=</span> <span class="nv">"Shandong University"</span> 
<span class="k">union</span> <span class="k">all</span>
<span class="k">select</span> <span class="n">device_id</span><span class="p">,</span> <span class="n">gender</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">gpa</span> <span class="k">from</span> <span class="n">user_profile</span> <span class="k">where</span> <span class="n">gender</span> <span class="o">=</span> <span class="s1">'male'</span> 
</pre></table></code></div></div><p>outputs the set of users that come from Shandong University, then users that are male, <em>in that order</em>. Instead, in the output of this query</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">select</span> <span class="n">device_id</span><span class="p">,</span> <span class="n">gender</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">gpa</span> 
<span class="k">from</span> <span class="n">user_profile</span> 
<span class="k">where</span> <span class="n">university</span> <span class="o">=</span> <span class="nv">"Shandong University"</span> <span class="k">or</span> <span class="n">gender</span> <span class="o">=</span> <span class="s1">'male'</span>
</pre></table></code></div></div><p>users from Shandong University and users that are male are randomly mixed.</p><h2 id="calculating-statistics-with-aggregate-functions">Calculating statistics with aggregate functions<a href="#calculating-statistics-with-aggregate-functions"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-sql highlighter-rouge"><div class="code-header"> <span label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">select</span> <span class="n">agg</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="k">as</span> <span class="p">...</span>
<span class="k">from</span> <span class="n">tb</span>
<span class="k">where</span> <span class="n">condition</span>
</pre></table></code></div></div><div class="table-wrapper"><table><thead><tr><th>function<th>description<tbody><tr><td><code class="language-plaintext highlighter-rouge">count(col)</code><td>counts the number of rows<tr><td><code class="language-plaintext highlighter-rouge">min(col)</code><td>min for all rows<tr><td><code class="language-plaintext highlighter-rouge">max(col)</code><td>max for all rows<tr><td><code class="language-plaintext highlighter-rouge">avg(col)</code><td>average for all rows<tr><td><code class="language-plaintext highlighter-rouge">sum(col)</code><td>sum over all rows</table></div><h3 id="apply-aggregate-functions-to-different-groups-of-rows-with-group-by">Apply aggregate functions to different groups of rows with ‚Äúgroup by‚Äù<a href="#apply-aggregate-functions-to-different-groups-of-rows-with-group-by"><i class="fas fa-hashtag"></i></a></h3></h3><p>Instead of aggregating across <strong><em>all</em></strong> the rows, you can also apply the aggregate functions to different <strong><em>groups</em></strong> of rows with the <code class="language-plaintext highlighter-rouge">group by</code> keyword.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">select</span> <span class="k">c</span><span class="p">,</span> <span class="n">agg</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="k">as</span> <span class="n">col_name</span>
<span class="k">from</span> <span class="n">tb</span>
<span class="k">where</span> <span class="n">condition</span>
<span class="k">group</span> <span class="k">by</span> <span class="k">c</span>
</pre></table></code></div></div><p>Rows are classified by values in <code class="language-plaintext highlighter-rouge">c</code>. In other words, rows that correspond to the same value in <code class="language-plaintext highlighter-rouge">c</code> belong to the same group.</p><h3 id="filter-calculated-columns-with-having">Filter calculated columns with ‚Äúhaving‚Äù<a href="#filter-calculated-columns-with-having"><i class="fas fa-hashtag"></i></a></h3></h3><p>The <code class="language-plaintext highlighter-rouge">having</code> keyword is used to filter rows in calculated columns.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">select</span> <span class="n">id</span><span class="p">,</span> <span class="n">fun</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="k">as</span> <span class="n">col_name</span>
<span class="p">(</span><span class="k">group</span> <span class="k">by</span> <span class="n">col</span><span class="p">)</span>
<span class="k">having</span> <span class="n">col_name</span><span class="p">...</span>
</pre></table></code></div></div><h2 id="functions">Functions<a href="#functions"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="date-operators--functions">Date operators &amp; functions<a href="#date-operators--functions"><i class="fas fa-hashtag"></i></a></h3></h3><p>Below is a list of some date operators in PostgreSQL.</p><div class="table-wrapper"><table><thead><tr><th>operator<th>meaning<th>example<th>result<tbody><tr><td><code class="language-plaintext highlighter-rouge">+ int</code><td>add a number of days to a date<td><code class="language-plaintext highlighter-rouge">select date '2021-08-14' + 1</code><td>202-08-15<tr><td><code class="language-plaintext highlighter-rouge">+ interval</code><td>add an interval to a date<td><code class="language-plaintext highlighter-rouge">select date '2001-09-28' + interval '1 hour'</code><td>2001-09-28 01:00:00<tr><td><code class="language-plaintext highlighter-rouge">+ time</code><td>add a time-of-day to a date<td>¬†<td>¬†<tr><td><code class="language-plaintext highlighter-rouge">- int</code><td>subtract a number of days from a date<td>¬†<td>¬†<tr><td><code class="language-plaintext highlighter-rouge">- date</code><td>subtract days, producing the number of days elapsed<td><code class="language-plaintext highlighter-rouge">select date '2001-10-01' - date '2001-09-28'</code><td>3<tr><td><code class="language-plaintext highlighter-rouge">- time</code><td>subtract times<td>¬†<td>¬†</table></div><p>Some date functions in PostgreSQL and MySQL:</p><div class="table-wrapper"><table><thead><tr><th>function<th>PostgreSQL<th>MySQL<th>description<tbody><tr><td><code class="language-plaintext highlighter-rouge">now()</code><td>‚úÖ<td>‚úÖ<td>date and time now<tr><td><code class="language-plaintext highlighter-rouge">current_date</code><td>‚úÖ<td>¬†<td>date now<tr><td><code class="language-plaintext highlighter-rouge">current_time</code><td>‚úÖ<td>¬†<td>time now<tr><td><code class="language-plaintext highlighter-rouge">curdate()</code><td>¬†<td>‚úÖ<td>date now<tr><td><code class="language-plaintext highlighter-rouge">curtime()</code><td>¬†<td>‚úÖ<td>time now<tr><td><code class="language-plaintext highlighter-rouge">date()</code><td>¬†<td>‚úÖ<td>extract date<tr><td><code class="language-plaintext highlighter-rouge">day()</code><td>¬†<td>‚úÖ<td>extract day<tr><td><code class="language-plaintext highlighter-rouge">month()</code><td>¬†<td>‚úÖ<td>extract month<tr><td><code class="language-plaintext highlighter-rouge">year()</code><td>¬†<td>‚úÖ<td>extract year<tr><td><code class="language-plaintext highlighter-rouge">age(timestamp, timestap)</code><td>‚úÖ<td>¬†<td>subtract two dates<tr><td><code class="language-plaintext highlighter-rouge">datediff(d1, d2)</code><td>¬†<td>‚úÖ<td>subtract two dates<tr><td><code class="language-plaintext highlighter-rouge">extract(unit from timestamp)</code><td>‚úÖ<td>‚úÖ<td>extract unit from date</table></div><p>A useful function might be the <code class="language-plaintext highlighter-rouge">extract</code> function. It can be used to extract year, month or date from datetime record, which is useful for analysis based on different dates.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">extract</span><span class="p">(</span><span class="n">unit</span> <span class="k">from</span> <span class="nb">date</span><span class="p">)</span>
</pre></table></code></div></div><p>unit can be: <code class="language-plaintext highlighter-rouge">microsecond</code>, <code class="language-plaintext highlighter-rouge">second</code>, <code class="language-plaintext highlighter-rouge">minute</code>, <code class="language-plaintext highlighter-rouge">hour</code>, <code class="language-plaintext highlighter-rouge">day</code>, <code class="language-plaintext highlighter-rouge">week</code>, <code class="language-plaintext highlighter-rouge">month</code>, <code class="language-plaintext highlighter-rouge">quarter</code>, <code class="language-plaintext highlighter-rouge">year</code>.</p><p>Different databases may have different date functions. Refer to official documentations for complete list of date functions:</p><ul><li><a href="https://www.postgresql.org/docs/current/functions-datetime.html">PostgreSQL date functions</a><li><a href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html">MySQL date functions</a></ul><h3 id="string-operators--functions">String operators &amp; functions<a href="#string-operators--functions"><i class="fas fa-hashtag"></i></a></h3></h3><p>Here we list some of the string functions in PostgreSQL. Refer to the <a href="https://www.postgresql.org/docs/9.1/functions-string.html">documentation</a> for a complete list.</p><div class="table-wrapper"><table><thead><tr><th>function<th>description<th>example<th>result<tbody><tr><td><code class="language-plaintext highlighter-rouge">s || s</code><td>string concatenation<td><code class="language-plaintext highlighter-rouge">'Post' || 'greSQL'</code><td>PostgreSQL<tr><td><code class="language-plaintext highlighter-rouge">length(s)</code><td>length of string<td><code class="language-plaintext highlighter-rouge">length('jose')</code><td>4<tr><td><code class="language-plaintext highlighter-rouge">lower(s)</code><td>convert string to lower case<td><code class="language-plaintext highlighter-rouge">lower('FEMALE')</code><td>female<tr><td><code class="language-plaintext highlighter-rouge">upper(s)</code><td>convert string to upper case<td><code class="language-plaintext highlighter-rouge">upper('female')</code><td>FEMALE<tr><td><code class="language-plaintext highlighter-rouge">position(sub in s)</code><td>location of specified substring<td><code class="language-plaintext highlighter-rouge">position('z' in 'wxyz')</code><td>4<tr><td><code class="language-plaintext highlighter-rouge">substring(s from [int] for [int])</code><td>extract substring<td><code class="language-plaintext highlighter-rouge">substring('abcde' from 2 for 3)</code><td>bcd<tr><td><code class="language-plaintext highlighter-rouge">substring(s from [re])</code><td>extract substring with regular expression<td><code class="language-plaintext highlighter-rouge">substring('LxxxR xyz' from 'L.*R')</code><td>LxxxR<tr><td><code class="language-plaintext highlighter-rouge">left(s, n)</code><td>return fist n characters in the string. When $n$ is negative, return all but last $\vert n\vert$ characters.<td><code class="language-plaintext highlighter-rouge">left('abcde', 2)</code><td>ab<tr><td><code class="language-plaintext highlighter-rouge">right(s, n)</code><td>return last $n$ characters in the string.<td><code class="language-plaintext highlighter-rouge">right('vwxyz', 2)</code><td>yz<tr><td><code class="language-plaintext highlighter-rouge">replace(s, sub, repl)</code><td>replace all occurences of substring<td><code class="language-plaintext highlighter-rouge">replace('WakqSnake', 'ak', 'xx')</code><td>WxxqSnxxe<tr><td><code class="language-plaintext highlighter-rouge">repeat(s, n)</code><td>repeat string $n$ times<td><code class="language-plaintext highlighter-rouge">repeat('Pg', 4)</code><td>PgPgPgPg<tr><td><code class="language-plaintext highlighter-rouge">string_to_array(s, delimiter)</code><td>split string to array<td><code class="language-plaintext highlighter-rouge">select (string_to_array('165cm,55kg,26,female', ','))[4]</code><td>female</table></div><p>Related: <a href="https://www.postgresql.org/docs/9.1/functions-array.html">PostgreSQL documentation on array functions</a></p><h3 id="window-functions">Window functions<a href="#window-functions"><i class="fas fa-hashtag"></i></a></h3></h3><p>Window functions are useful when we need to calculate something <em>within</em> a column. We partition a column into windows, and apply a function to each window. The calculated column can then be selected alongside with other columns.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">select</span> <span class="n">id</span><span class="p">,</span> <span class="n">fun</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="n">over</span> <span class="p">(</span><span class="k">partition</span> <span class="k">by</span> <span class="n">col2</span> <span class="k">order</span> <span class="k">by</span> <span class="n">col3</span><span class="p">)</span> <span class="k">as</span> <span class="n">col_name</span>
<span class="k">from</span> <span class="n">tb</span>
</pre></table></code></div></div><p>for <code class="language-plaintext highlighter-rouge">fun</code> can use</p><ul><li><p>aggregate functions: <code class="language-plaintext highlighter-rouge">max</code>, <code class="language-plaintext highlighter-rouge">min</code>, <code class="language-plaintext highlighter-rouge">sum</code>, etc.</p><li>ranking functions: <code class="language-plaintext highlighter-rouge">row_number</code>, <code class="language-plaintext highlighter-rouge">rank</code>, <code class="language-plaintext highlighter-rouge">dense_rank</code>, <code class="language-plaintext highlighter-rouge">ntile</code>, etc. <strong>They are useful for selecting the top (min or max) N records per category.</strong><div class="language-sql highlighter-rouge"><div class="code-header"> <span label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="k">select</span>
       <span class="n">val</span><span class="p">,</span>
       <span class="n">row_number</span><span class="p">()</span> <span class="n">over</span> <span class="n">w</span> <span class="k">as</span> <span class="s1">'row_number'</span><span class="p">,</span>
       <span class="n">rank</span><span class="p">()</span>       <span class="n">over</span> <span class="n">w</span> <span class="k">as</span> <span class="s1">'rank'</span><span class="p">,</span>
       <span class="n">dense_rank</span><span class="p">()</span> <span class="n">over</span> <span class="n">w</span> <span class="k">as</span> <span class="s1">'dense_rank'</span>
     <span class="k">from</span> <span class="n">numbers</span>
     <span class="k">window</span> <span class="n">w</span> <span class="k">as</span> <span class="p">(</span><span class="k">order</span> <span class="k">by</span> <span class="n">val</span><span class="p">);</span>
<span class="o">+</span><span class="c1">------+------------+------+------------+</span>
<span class="o">|</span> <span class="n">val</span>  <span class="o">|</span> <span class="n">row_number</span> <span class="o">|</span> <span class="n">rank</span> <span class="o">|</span> <span class="n">dense_rank</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------+------------+------+------------+</span>
<span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>          <span class="mi">1</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>          <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>          <span class="mi">2</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>          <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">2</span> <span class="o">|</span>          <span class="mi">3</span> <span class="o">|</span>    <span class="mi">3</span> <span class="o">|</span>          <span class="mi">2</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">3</span> <span class="o">|</span>          <span class="mi">4</span> <span class="o">|</span>    <span class="mi">4</span> <span class="o">|</span>          <span class="mi">3</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">3</span> <span class="o">|</span>          <span class="mi">5</span> <span class="o">|</span>    <span class="mi">4</span> <span class="o">|</span>          <span class="mi">3</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">3</span> <span class="o">|</span>          <span class="mi">6</span> <span class="o">|</span>    <span class="mi">4</span> <span class="o">|</span>          <span class="mi">3</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">4</span> <span class="o">|</span>          <span class="mi">7</span> <span class="o">|</span>    <span class="mi">7</span> <span class="o">|</span>          <span class="mi">4</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">4</span> <span class="o">|</span>          <span class="mi">8</span> <span class="o">|</span>    <span class="mi">7</span> <span class="o">|</span>          <span class="mi">4</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">5</span> <span class="o">|</span>          <span class="mi">9</span> <span class="o">|</span>    <span class="mi">9</span> <span class="o">|</span>          <span class="mi">5</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------+------------+------+------------+</span>
</pre></table></code></div></div><li>analytic functions: <code class="language-plaintext highlighter-rouge">lag</code>, <code class="language-plaintext highlighter-rouge">lead</code>. <strong>They are useful for comparing multiple rows and calculate differences between rows.</strong><div class="language-sql highlighter-rouge"><div class="code-header"> <span label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="k">select</span>
       <span class="n">t</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span>
       <span class="n">lag</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>        <span class="n">over</span> <span class="n">w</span> <span class="k">as</span> <span class="s1">'lag'</span><span class="p">,</span>
       <span class="n">lead</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>       <span class="n">over</span> <span class="n">w</span> <span class="k">as</span> <span class="s1">'lead'</span><span class="p">,</span>
       <span class="n">val</span> <span class="o">-</span> <span class="n">lag</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>  <span class="n">over</span> <span class="n">w</span> <span class="k">as</span> <span class="s1">'lag diff'</span><span class="p">,</span>
       <span class="n">val</span> <span class="o">-</span> <span class="n">lead</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="n">over</span> <span class="n">w</span> <span class="k">as</span> <span class="s1">'lead diff'</span>
     <span class="k">from</span> <span class="n">series</span>
     <span class="k">window</span> <span class="n">w</span> <span class="k">as</span> <span class="p">(</span><span class="k">order</span> <span class="k">by</span> <span class="n">t</span><span class="p">);</span>
<span class="o">+</span><span class="c1">----------+------+------+------+----------+-----------+</span>
<span class="o">|</span> <span class="n">t</span>        <span class="o">|</span> <span class="n">val</span>  <span class="o">|</span> <span class="n">lag</span>  <span class="o">|</span> <span class="n">lead</span> <span class="o">|</span> <span class="n">lag</span> <span class="n">diff</span> <span class="o">|</span> <span class="n">lead</span> <span class="n">diff</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">----------+------+------+------+----------+-----------+</span>
<span class="o">|</span> <span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="o">|</span>  <span class="mi">100</span> <span class="o">|</span> <span class="k">NULL</span> <span class="o">|</span>  <span class="mi">125</span> <span class="o">|</span>     <span class="k">NULL</span> <span class="o">|</span>       <span class="o">-</span><span class="mi">25</span> <span class="o">|</span>
<span class="o">|</span> <span class="mi">13</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="o">|</span>  <span class="mi">125</span> <span class="o">|</span>  <span class="mi">100</span> <span class="o">|</span>  <span class="mi">132</span> <span class="o">|</span>       <span class="mi">25</span> <span class="o">|</span>        <span class="o">-</span><span class="mi">7</span> <span class="o">|</span>
<span class="o">|</span> <span class="mi">14</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="o">|</span>  <span class="mi">132</span> <span class="o">|</span>  <span class="mi">125</span> <span class="o">|</span>  <span class="mi">145</span> <span class="o">|</span>        <span class="mi">7</span> <span class="o">|</span>       <span class="o">-</span><span class="mi">13</span> <span class="o">|</span>
<span class="o">|</span> <span class="mi">15</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="o">|</span>  <span class="mi">145</span> <span class="o">|</span>  <span class="mi">132</span> <span class="o">|</span>  <span class="mi">140</span> <span class="o">|</span>       <span class="mi">13</span> <span class="o">|</span>         <span class="mi">5</span> <span class="o">|</span>
<span class="o">|</span> <span class="mi">16</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="o">|</span>  <span class="mi">140</span> <span class="o">|</span>  <span class="mi">145</span> <span class="o">|</span>  <span class="mi">150</span> <span class="o">|</span>       <span class="o">-</span><span class="mi">5</span> <span class="o">|</span>       <span class="o">-</span><span class="mi">10</span> <span class="o">|</span>
<span class="o">|</span> <span class="mi">17</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="o">|</span>  <span class="mi">150</span> <span class="o">|</span>  <span class="mi">140</span> <span class="o">|</span>  <span class="mi">200</span> <span class="o">|</span>       <span class="mi">10</span> <span class="o">|</span>       <span class="o">-</span><span class="mi">50</span> <span class="o">|</span>
<span class="o">|</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="o">|</span>  <span class="mi">200</span> <span class="o">|</span>  <span class="mi">150</span> <span class="o">|</span> <span class="k">NULL</span> <span class="o">|</span>       <span class="mi">50</span> <span class="o">|</span>      <span class="k">NULL</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">----------+------+------+------+----------+-----------+</span>
</pre></table></code></div></div></ul><blockquote class="prompt-info"><p>window functions may store information on a temporary database on disk, so their performance can be very slow. In many situations the old fashioned<code class="language-plaintext highlighter-rouge">group by</code> is way faster than window functions.</p></blockquote><h2 id="examples">Examples<a href="#examples"><i class="fas fa-hashtag"></i></a></h2></h2><p>See <a href="https://github.com/lifeitech/sql-nowcoder">https://github.com/lifeitech/sql-nowcoder</a>.</p><h2 id="io-with-python">I/O with Python<a href="#io-with-python"><i class="fas fa-hashtag"></i></a></h2></h2><p>To read from and write data to database with Python is easy. Here is an example showing how to convert SQL tables to pandas DataFrames and vice versa (using PostgreSQL).</p><p>First, install the following two packages</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>pip <span class="nb">install </span>psycopg2-binary  <span class="c"># mysql would be: mysqldb or pymysql etc.</span>
pip <span class="nb">install </span>sqlalchemy
</pre></table></code></div></div><p>We can connect to database with the <code class="language-plaintext highlighter-rouge">create_engine()</code> function provided by the <code class="language-plaintext highlighter-rouge">sqlalchemy</code> package, with</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>dialect+driver://username:password@host:port/database
</pre></table></code></div></div><p>as input url, where <code class="language-plaintext highlighter-rouge">host</code> is the server address, and <code class="language-plaintext highlighter-rouge">database</code> is the name of the database. For more details refer to <a href="https://docs.sqlalchemy.org/en/20/core/engines.html">sqlalchemy docs</a>.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">from</span> <span class="n">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">engine</span> <span class="o">=</span> <span class="nf">create_engine</span><span class="p">(</span><span class="sh">'</span><span class="s">postgresql+psycopg2://username:password@server:port/database</span><span class="sh">'</span><span class="p">)</span>
<span class="n">con</span>  <span class="o">=</span> <span class="n">engine</span><span class="p">.</span><span class="nf">connect</span><span class="p">()</span>

<span class="c1"># read table 'user/info' into pandas dataframe
</span><span class="n">profile</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">read_sql</span><span class="p">(</span><span class="sh">'</span><span class="s">select * from user.info</span><span class="sh">'</span><span class="p">,</span> <span class="n">con</span><span class="o">=</span><span class="n">con</span><span class="p">)</span>

<span class="c1"># ....
</span>
<span class="c1"># write dataframe to a new table in db named 'analysis'
</span><span class="n">df</span><span class="p">.</span><span class="nf">to_sql</span><span class="p">(</span><span class="sh">'</span><span class="s">analysis</span><span class="sh">'</span><span class="p">,</span> <span class="n">con</span><span class="o">=</span><span class="n">engine</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="sh">'</span><span class="s">user</span><span class="sh">'</span><span class="p">,</span> <span class="n">if_exists</span><span class="o">=</span><span class="sh">'</span><span class="s">replace</span><span class="sh">'</span><span class="p">)</span>
</pre></table></code></div></div><p>Here, the name ‚Äúschema‚Äù is somewhat confusing, in practice it basically means the ‚Äúfolder‚Äù that contains the table.</p><hr /><p>Cite as:</p><div class="language-bibtex highlighter-rouge"><div class="code-header"> <span label-text="Bibtex"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nc">@article</span><span class="p">{</span><span class="nl">lifei2022sql</span><span class="p">,</span>
  <span class="na">title</span>   <span class="p">=</span> <span class="s">"All about SQL Queries"</span><span class="p">,</span>
  <span class="na">author</span>  <span class="p">=</span> <span class="s">"Li, Fei"</span><span class="p">,</span>
  <span class="na">journal</span> <span class="p">=</span> <span class="s">"https://lifeitech.github.io"</span><span class="p">,</span>
  <span class="na">year</span>    <span class="p">=</span> <span class="s">"2022"</span><span class="p">,</span>
  <span class="na">url</span><span class="p">=</span> <span class="s">"https://lifeitech.github.io/posts/sql/"</span>
<span class="p">}</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/programming/'>Programming</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/sql/" class="post-tag no-text-decoration" >sql</a> <a href="/tags/database/" class="post-tag no-text-decoration" >database</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=All about SQL Queries - lifeitech.github.io&url=https://lifeitech.github.io/posts/sql/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=All about SQL Queries - lifeitech.github.io&u=https://lifeitech.github.io/posts/sql/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=All about SQL Queries - lifeitech.github.io&url=https://lifeitech.github.io/posts/sql/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://lifeitech.github.io/posts/sql/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/nlp/">nlp</a> <a class="post-tag" href="/tags/app-development/">app-development</a> <a class="post-tag" href="/tags/database/">database</a> <a class="post-tag" href="/tags/generative-model/">generative-model</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/math/">math</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/web-development/">web-development</a> <a class="post-tag" href="/tags/attention/">attention</a> <a class="post-tag" href="/tags/big-data/">big-data</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" class="js-toc"></nav></div><script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script> <script> tocbot.init({ tocSelector: '.js-toc', contentSelector: '.js-toc-content', headingSelector: 'h1, h2, h3', hasInnerContainers: true, }); </script></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/google-big-data/"><div class="card-body"> <em class="timeago small" date="2022-05-15 18:38:00 +0800" >May 15, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Google's three big data technologies: GFS, Bigtable and MapReduce</h3><div class="text-muted small"><p> Have you wondered about the inner workings of big data? How parallel and distributed computing work? In this post we will have a look at Google‚Äôs three early works in the 2000s that are the basi...</p></div></div></a></div><div class="card"> <a href="/posts/julia/"><div class="card-body"> <em class="timeago small" date="2022-05-03 15:00:00 +0800" >May 3, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Julia in 15 Minutes</h3><div class="text-muted small"><p> Julia is a fast and elegant programming language. In this post, we record some of its syntax, and we talk about advanced topics like types, methods and metaprogramming with real examples. We als...</p></div></div></a></div><div class="card"> <a href="/posts/pixel-weather/"><div class="card-body"> <em class="timeago small" date="2023-01-18 15:00:00 +0800" >Jan 18, 2023</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Building Cross-platform Mobile Apps with React Native</h3><div class="text-muted small"><p> I built a mobile app for checking weather ‚Äì called ‚ÄúPixel Weather‚Äù ‚Äì with React Native. I will talk about cross-platform app development, and give a walkthrough of this project in this post. C...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/google-big-data/" class="btn btn-outline-primary" prompt="Older"><p>Google's three big data technologies: GFS, Bigtable and MapReduce</p></a> <a href="/posts/pixel-weather/" class="btn btn-outline-primary" prompt="Newer"><p>Building Cross-platform Mobile Apps with React Native</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://lifeitech.github.io/posts/sql/'; this.page.identifier = '/posts/sql/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://www-lifei-tech.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> ¬© 2024 <a href="https://lifeitech.github.io">Fei Li</a> <span></span></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/nlp/">nlp</a> <a class="post-tag" href="/tags/app-development/">app-development</a> <a class="post-tag" href="/tags/database/">database</a> <a class="post-tag" href="/tags/generative-model/">generative-model</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/math/">math</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/web-development/">web-development</a> <a class="post-tag" href="/tags/attention/">attention</a> <a class="post-tag" href="/tags/big-data/">big-data</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdnjs.cloudflare.com/ajax/libs/simple-jekyll-search/1.9.2/simple-jekyll-search.min.js" referrerpolicy="no-referrer"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" referrerpolicy="no-referrer"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js" integrity="sha512-IsNh5E3eYy3tr/JiX2Yx4vsCujtkhwl7SLqgnwLNgf04Hrt9BT9SXlLlZlWx+OK4ndzAoALhsMNcCmkggjZB1w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { tags: 'ams', inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ], processEscapes: true } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.1/es5/tex-mml-chtml.min.js" integrity="sha512-lt3EkmQb16BgAXR0iCk+JUJyDFmS9NZEMXCXK169qQoWcXu9CS4feejtxkjjUruw/Y0XfL1qxh41xVQPvCxM1A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js" integrity="sha512-pax4MlgXjHEPfCwcJLQhigY7+N8rt6bVvWLFyUMuxShv170X53TRzGPmPkZmGBhk+jikR8WBM4yl7A9WMHHqvg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
